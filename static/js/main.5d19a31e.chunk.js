(this.webpackJsonpkaixa_website=this.webpackJsonpkaixa_website||[]).push([[0],{253:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),i=a.n(s),o=(a(36),a(2)),c=a(3),l=a(5),u=a(4),p=(a(37),a(38),a(8)),h=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("li",{className:this.props.isLargeScreen?"NavItem":"NarrowNavItem"},r.a.createElement("h3",null,r.a.createElement(p.b,{to:this.props.link},this.props.name)))}}]),a}(r.a.Component),m=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toLogin=function(){e.props.onPageChanged(!0)},e.toRegister=function(){e.props.onPageChanged(!1)},e}return Object(c.a)(a,[{key:"render",value:function(){var e;return e=this.props.loggedIn?r.a.createElement(p.b,{to:"/logout"}," \u9000\u51fa\u767b\u5f55 "):this.props.showingLogin?r.a.createElement(p.b,{to:"/register",onClick:this.toRegister},"\u53bb\u6ce8\u518c"):r.a.createElement(p.b,{to:"/login",onClick:this.toLogin},"\u53bb\u767b\u5f55"),r.a.createElement("ul",{className:"UserInfo"},r.a.createElement("li",null,e))}}]),a}(r.a.Component),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleShowingPageChanged=function(e){n.setState({showingLoginPage:e})},n.onToggleButtonClick=function(){var e=!n.state.showNavBarContent;n.setState({showNavBarContent:e})},n.state={showingLoginPage:!0,showNavBarContent:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.isLargeScreen?null:r.a.createElement("button",{className:"ToggleButton",onClick:this.onToggleButtonClick});return this.props.isLargeScreen?e=r.a.createElement("div",{className:"NavBarContentContainer"},r.a.createElement("ul",{className:"NavBarSiteItemContainer"},this.props.items.map((function(e,a){return r.a.createElement(h,{name:e.name,link:e.link,key:a,screenWidth:t.props.screenWidth,isLargeScreen:t.props.isLargeScreen})}))),r.a.createElement(m,{loggedIn:this.props.loggedIn,showingLogin:this.state.showingLoginPage,onPageChanged:this.handleShowingPageChanged})):this.state.showNavBarContent&&(e=r.a.createElement("ul",{className:"NarrowNavBarContainer"},this.props.items.map((function(e,a){return r.a.createElement(h,{name:e.name,link:e.link,key:a,screenWidth:t.props.screenWidth,isLargeScreen:t.props.isLargeScreen})})),r.a.createElement("li",null,r.a.createElement(m,{loggedIn:this.props.loggedIn,showingLogin:this.state.showingLoginPage,onPageChanged:this.handleShowingPageChanged})))),r.a.createElement("div",{className:"NavBarContainer"},r.a.createElement("div",{className:"NavBarMain"},r.a.createElement("span",{className:"Title"},this.props.title),this.props.isLargeScreen?e:a),this.props.isLargeScreen?null:e)}}]),a}(r.a.Component),g=(a(43),function(e){return"https://www.kaixa.cn/"+e}),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={name:"",avatar:"",company:"",github:"",repos:[],fetching:!0,fetchSuccess:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(g("my_profile")).then((function(e){return e.json()})).then((function(t){t.success?e.setState({fetchSuccess:!0,fetching:!1,avatar:t.avatar_url,name:t.name,company:t.company,github:t.html_url,repos:t.repos}):e.setState({fetching:!1,fetchSuccess:!1})}))}},{key:"render",value:function(){return this.state.fetching?r.a.createElement("div",null,"Loading. Please wait"):this.state.fetchSuccess?r.a.createElement("div",{className:"IndexPageContainer FullPage"},r.a.createElement("div",{className:"IndexPageInfoContainer"},r.a.createElement("div",{className:"IndexPageAvatarBox"},r.a.createElement("img",{src:this.state.avatar,alt:this.state.name})),r.a.createElement("div",{className:"IndexPageInfoBox"},r.a.createElement("h2",{className:"IndexPageNameBox"},this.state.name),r.a.createElement("div",{className:"IndexPageCompanyBox"},this.state.company),r.a.createElement("div",{className:"IndexPageLinkBox"},r.a.createElement("a",{href:this.state.github},this.state.github)))),r.a.createElement("ul",{className:"IndexPageRepoList"},r.a.createElement("h3",null,"\u4ee3\u7801\u4ed3\u5e93"),this.state.repos.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:e.link},e.title))})))):r.a.createElement("div",null,"Fetch failed.")}}]),a}(r.a.Component),v=a(14),E=a.n(v),b=a(28),j=a(19),k=(a(252),a(253),a(15)),O=a(21),y=a(29);E.a.setOptions({renderer:new E.a.Renderer,highlight:function(e){return Object(b.highlightAuto)(e).value},gfm:!0,pedantic:!1,breaks:!1,smartLists:!0,smartypants:!1});var S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onFileItemClick=function(e){e.preventDefault(),n.props.isLargeScreen||n.hideMobileMask();var t=e.nativeEvent.target.parentElement.href,a=t.endsWith(".md")?"markdown":"text",r=t.substr(t.lastIndexOf("/")+1);fetch(t,{method:"POST",credentials:"include",mode:"cors"}).then((function(e){return e.json()})).then((function(e){if(e.success){var t="markdown"===a?Object(j.sanitize)(E()(e.content)):e.content;n.props.openProjectFile(t,a,r)}else n.props.openProjectFile("error:\n"+e.err,"text",r)})).catch((function(){n.props.openProjectFile("failed to fetch:"+t,"text",r)}))},n.renderFileOrFolder=function(e,t){return"string"===typeof t?r.a.createElement("a",{href:g("project_file/")+n.props.project+e+"/"+t,onClick:n.onFileItemClick,key:e+"/"+t},r.a.createElement("li",{className:"FileItem"},r.a.createElement(k.a,{icon:y.a,style:{marginRight:10,color:"#adc1e4"}}),t)):r.a.createElement("li",{className:"FolderItem",key:t.folderName},r.a.createElement("div",null,r.a.createElement(k.a,{icon:O.b,color:"#f9d870",style:{marginRight:10}}),r.a.createElement("span",null,t.folderName)),r.a.createElement("ul",null,t.contents.map((function(a){return n.renderFileOrFolder(e+"/"+t.folderName,a)}))))},n.showMobileMask=function(){n.setState({showMask:!0})},n.hideMobileMask=function(){n.setState({showMask:!1})},n.mobileRenderFileOrFolder=function(e,t){return"string"===typeof t?r.a.createElement("a",{href:g("project_file/")+n.props.project+e+"/"+t,key:e+"/"+t,onClick:n.onFileItemClick},r.a.createElement("li",{className:"FileItem"},e+"/"+t)):r.a.createElement("li",{key:e+"/"+t.folderName,className:"FolderItem"},r.a.createElement("ul",null,t.contents.map((function(a){return n.mobileRenderFileOrFolder(e+"/"+t.folderName,a)}))))},n.state={showMask:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.props.projectFiles),this.props.isLargeScreen?r.a.createElement("nav",{className:"DocumentCatalogueContainer"},r.a.createElement("header",{className:"DocumentCatalogueHeader"},r.a.createElement("div",{style:{width:"fit-content"}},r.a.createElement(p.b,{to:"../",className:"CloseProjectLink"},r.a.createElement(k.a,{icon:O.a}))),r.a.createElement("div",null,this.props.project)),r.a.createElement("div",{className:"DocumentCatalogueBody"},r.a.createElement("ul",{className:"DocumentCatalogueTopFolder"},this.props.projectFiles.map((function(t){return e.renderFileOrFolder("",t)}))))):r.a.createElement("div",{className:"MobileCatalogueContainer"},r.a.createElement("div",{style:{wordBreak:"keep-all"}},"\u5f53\u524d\u6587\u4ef6\uff1a"),r.a.createElement("div",{className:"MobileCatalogueChangeButton",onClick:this.showMobileMask},this.props.currentFile),this.state.showMask?r.a.createElement("div",{className:"MobileMask",onClick:this.hideMobileMask},r.a.createElement("ul",{className:"MobileFileList"},this.props.projectFiles.map((function(t){return e.mobileRenderFileOrFolder("",t)})))):null)}}]),a}(r.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e="markdown"===this.props.fileType?r.a.createElement("div",{className:"FileContent",dangerouslySetInnerHTML:{__html:Object(j.sanitize)(this.props.fileContent)}}):r.a.createElement("div",{className:"FileContent"},this.props.fileContent.split("\n").map((function(e,t){return r.a.createElement("div",{key:t,style:{fontSize:"large"}},e)})));return r.a.createElement("div",{className:"FileContainer"},r.a.createElement("ul",{className:"FileHeader"},r.a.createElement("li",{className:"FileTab"},this.props.filename)),r.a.createElement("div",{className:"FileBody"},e))}}]),a}(r.a.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).openProjectFile=function(e,t,a){n.setState({fileContent:e,fileType:t,filename:a})},fetch(g("projectDoc/")+n.props.project,{mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(e){n.props.updateProjectFiles(e)})),n.state={fileContent:"\u6b22\u8fce\u4f7f\u7528kaixadoc",fileType:"markdown",filename:"welcome"},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ProjectReaderContainer"},r.a.createElement(S,{project:this.props.project,projectFiles:this.props.files,currentFile:this.state.filename,openProjectFile:this.openProjectFile,screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen}),r.a.createElement(N,{fileContent:this.state.fileContent,fileType:this.state.fileType,filename:this.state.filename}))}}]),a}(r.a.Component),w=a(6),L=(a(257),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("li",{className:"DocLink"},r.a.createElement(p.b,{to:"/"+this.props.linkName},this.props.displayName))}}]),a}(r.a.Component)),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"ProjectList"},this.props.projects.map((function(e,t){return r.a.createElement(L,{displayName:e.name,linkName:e.url,key:t})}))))}}]),a}(r.a.Component),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateProjectFiles=function(e){n.setState({projectFiles:e})},n.state={projects:[],projectFiles:[],ProjectsQueried:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(g("projectDoc"),{mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(t){e.setState({projects:t,ProjectsQueried:!0})}))}},{key:"render",value:function(){var e=this;return this.props.loggedIn?this.state.ProjectsQueried?r.a.createElement("div",{className:"FullPage"},r.a.createElement(p.a,{basename:"/docs"},r.a.createElement(w.d,null,this.state.projects.map((function(t,a){return r.a.createElement(w.b,{key:a,path:"/"+t.url},r.a.createElement("div",{className:"DocPageContainer"},r.a.createElement(C,{project:t.name,files:e.state.projectFiles,updateProjectFiles:e.updateProjectFiles,screenWidth:e.props.screenWidth,isLargeScreen:e.props.isLargeScreen})))})),r.a.createElement(w.b,{path:"/"},r.a.createElement(F,{projects:this.state.projects}))))):r.a.createElement("div",null,"loading projects. please wait."):r.a.createElement(w.a,{to:"/login?from_link=/docs"})}}]),a}(r.a.Component),P=(a(258),a(30)),W=a.n(P),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).OnChange=function(t){var a=t.target;e.props.setValue(a.value)},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ResponsiveInputBorder"},this.props.isLargeScreen?r.a.createElement("label",{className:"ResponsiveInputHint"},this.props.placeholder):null,r.a.createElement("input",{type:this.props.type?this.props.type:"text",name:this.props.name,value:this.props.value,placeholder:this.props.isLargeScreen?"":this.props.placeholder,autoComplete:"password"===this.props.type?"current-password":"on",onChange:this.OnChange}))}}]),a}(r.a.Component),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){e.preventDefault(),n.props.loginFunction()},n.fakeCallback=function(e){console.log(e)},n.state={redirectTo:window.location.href.substr(window.location.href.lastIndexOf("=")+1)},n}return Object(c.a)(a,[{key:"render",value:function(){return this.props.loggedIn?r.a.createElement(w.a,{to:this.state.redirectTo}):r.a.createElement("div",{className:"LoginFormContainer FullPage"},this.props.isLargeScreen?r.a.createElement("aside",{className:"ImgArea"},r.a.createElement("img",{src:W.a,alt:"tmp logo"})):null,r.a.createElement("form",{className:"LoginForm",onSubmit:this.onSubmit},r.a.createElement("h3",null,"\u767b\u5f55"),r.a.createElement(x,{name:"name",placeholder:"\u7528\u6237\u540d",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:"",setValue:this.fakeCallback}),r.a.createElement(x,{type:"password",name:"pwd",placeholder:"\u5bc6 \u7801",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:"",setValue:this.fakeCallback}),r.a.createElement("button",null,"\u767b\u5f55")))}}]),a}(r.a.Component),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return this.props.loggedIn&&this.props.logoutFunction(),r.a.createElement(w.a,{to:"/login"})}}]),a}(r.a.Component),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"register")}}]),a}(r.a.Component),A=(a(259),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).query=function(e){e.preventDefault(),fetch(g("BjutSchedule"),{method:"POST",body:JSON.stringify({schoolId:n.state.sid,vpn:n.state.pwVPN,af:n.state.pwAF}),mode:"cors",credentials:"include"}).then((function(e){return e.text()})).then((function(e){console.log(e)}))},n.setSchoolId=function(e){n.setState({sid:e})},n.setAF=function(e){n.setState({pwAF:e})},n.setVPN=function(e){n.setState({pwVPN:e})},n.state={sid:"",pwAF:"",pwVPN:"",table:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{paddingTop:"1rem"}},r.a.createElement("form",{onSubmit:this.query},r.a.createElement("h3",null,"\u8bfe\u8868\u67e5\u8be2"),r.a.createElement(x,{placeholder:"\u5b66\u53f7",name:"schoolId",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.state.sid,setValue:this.setSchoolId}),r.a.createElement(x,{placeholder:"\u6559\u52a1\u5bc6\u7801",name:"pwForAF",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.state.pwAF,setValue:this.setAF,type:"password"}),r.a.createElement(x,{placeholder:"\u7f51\u5173\u5bc6\u7801",name:"pwForVPN",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.state.pwVPN,setValue:this.setVPN,type:"password"}),r.a.createElement("button",null,"\u67e5\u8be2")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.table}}))}}]),a}(r.a.Component)),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"FullPage"},r.a.createElement(A,{screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen}))}}]),a}(r.a.Component),D=(a(260),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Footer"},r.a.createElement("ul",null,this.props.sites.map((function(e,t){return r.a.createElement("li",{key:t},e.name)}))))}}]),a}(r.a.Component));function V(e){return e>768}var _=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).setResponsiveStates=function(){var e=document.body.clientWidth;n.setState({width:e,height:document.body.clientHeight,isLargeScreen:V(e)})},n.userLogin=function(){n.setState({isLoggedInUser:!0})},n.userLogout=function(){n.setState({isLoggedInUser:!1})};var r=document.body.clientWidth;return n.state={navSites:[{name:"\u5173\u4e8e",link:"/"},{name:"\u6587\u6863",link:"/docs"},{name:"\u5de5\u5177",link:"/tools"}],isLoggedInUser:!1,footerSites:[{name:"Copyright \xa92020 Woodykaixa. All rights reserved."}],width:r,height:document.body.clientHeight,isLargeScreen:V(r)},window.onresize=n.setResponsiveStates,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(d,{items:this.state.navSites,loggedIn:this.state.isLoggedInUser,title:"Kaixa Site",screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen}),r.a.createElement("div",{className:"MainContent"},r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/login"},r.a.createElement(M,{loggedIn:this.state.isLoggedInUser,loginFunction:this.userLogin,screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})),r.a.createElement(w.b,{path:"/logout"},r.a.createElement(B,{loggedIn:this.state.isLoggedInUser,logoutFunction:this.userLogout})),r.a.createElement(w.b,{path:"/register"},r.a.createElement(T,null)),r.a.createElement(w.b,{path:"/docs"},r.a.createElement(I,{loggedIn:this.state.isLoggedInUser,screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})),r.a.createElement(w.b,{path:"/tools"},r.a.createElement(R,{screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})),r.a.createElement(w.b,{path:"/"},r.a.createElement(f,null)))),r.a.createElement(D,{sites:this.state.footerSites,screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},30:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},31:function(e,t,a){e.exports=a(261)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},43:function(e,t,a){}},[[31,1,2]]]);
//# sourceMappingURL=main.5d19a31e.chunk.js.map