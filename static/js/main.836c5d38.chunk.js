(this.webpackJsonpkaixa_website=this.webpackJsonpkaixa_website||[]).push([[0],{264:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},279:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),i=(a(44),a(8)),c=a.n(i),l=a(15),u=a(2),p=a(3),m=a(5),h=a(4),d=(a(46),a(47),a(13)),g=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("li",{className:this.props.isLargeScreen?"NavItem":"NarrowNavItem"},r.a.createElement("h3",null,r.a.createElement(d.b,{to:this.props.link},this.props.name)))}}]),a}(r.a.Component),f=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).tryLogout=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.requestLogout();case 2:if(!t.sent){t.next=4;break}alert("failed to logout");case 4:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(a,[{key:"render",value:function(){var e;return e=this.props.loggedIn?r.a.createElement("button",{className:"UserInfoLoginButton",onClick:this.tryLogout},"\u9000\u51fa\u767b\u5f55"):r.a.createElement("button",{className:"UserInfoLoginButton",onClick:this.props.openLoginModal},"\u767b\u5f55/\u6ce8\u518c"),r.a.createElement("ul",{className:"UserInfo"},r.a.createElement("li",null,e))}}]),a}(r.a.Component),E=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onToggleButtonClick=function(){var e=!n.state.showNavBarContent;n.setState({showNavBarContent:e})},n.state={showNavBarContent:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.isLargeScreen?null:r.a.createElement("button",{className:"ToggleButton",onClick:this.onToggleButtonClick});return this.props.isLargeScreen?e=r.a.createElement("div",{className:"NavBarContentContainer"},r.a.createElement("ul",{className:"NavBarSiteItemContainer"},this.props.items.map((function(e,a){return r.a.createElement(g,{name:e.name,link:e.link,key:a,screenWidth:t.props.screenWidth,isLargeScreen:t.props.isLargeScreen})}))),r.a.createElement(f,{loggedIn:this.props.loggedIn,openLoginModal:this.props.openLoginModal,requestLogout:this.props.requestLogout})):this.state.showNavBarContent&&(e=r.a.createElement("ul",{className:"NarrowNavBarContainer"},this.props.items.map((function(e,a){return r.a.createElement(g,{name:e.name,link:e.link,key:a,screenWidth:t.props.screenWidth,isLargeScreen:t.props.isLargeScreen})})),r.a.createElement("li",null,r.a.createElement(f,{loggedIn:this.props.loggedIn,openLoginModal:this.props.openLoginModal,requestLogout:this.props.requestLogout})))),r.a.createElement("div",{className:"NavBarContainer"},r.a.createElement("div",{className:"NavBarMain"},r.a.createElement("div",{className:"Title"},this.props.title),this.props.isLargeScreen?e:a),this.props.isLargeScreen?null:e)}}]),a}(r.a.Component),v=(a(52),function(e){return e.startsWith("/")?"https://www.kaixa.cn"+e:"https://www.kaixa.cn/"+e});function b(e){return e>768}var w=function(e,t,a){var n={method:t,mode:"cors",credentials:"include",referrerPolicy:"no-referrer-when-downgrade"};return null!==a&&(n.body=a),fetch(v(e),n)},j=a(18),k=a(12),y=a(14),O=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.title;return this.props.language&&(e+=" (".concat(this.props.language,")")),r.a.createElement("div",{className:"RepoTagContainer"},r.a.createElement("a",{href:this.props.link},r.a.createElement("h3",null,e)),r.a.createElement("p",null,this.props.description),r.a.createElement("div",{className:"RepoTagInfoContainer"},r.a.createElement("span",{style:{width:10}}),r.a.createElement("span",null,r.a.createElement("p",null,"stars: ",this.props.star)),r.a.createElement("span",{style:{width:20}}),r.a.createElement("span",null,r.a.createElement("p",null,"forks: ",this.props.fork))))}}]),a}(r.a.Component),N=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={name:"",company:"",github:"",blog:"",location:"",repos:[],fetching:!0,fetchSuccess:!1,loginName:"",followers:0,following:0,repoCount:0,bio:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;w("admin_profile","GET").then((function(e){if(e.ok)return e.json();throw new Error("".concat(e.status,": ").concat(e.statusText))})).then((function(t){if(t.err)throw e.setState({fetching:!1,fetchSuccess:!1}),new Error(t.data);var a=t.data;e.setState({fetchSuccess:!0,fetching:!1,name:a.name,company:a.company,github:a.github,location:a.location,blog:a.blog,bio:a.bio,following:a.following,followers:a.followers,repoCount:a.repoCount}),a.repos.sort((function(e,t){return t.star-e.star})),e.setState({repos:a.repos})}))}},{key:"render",value:function(){var e=this;return this.state.fetching?r.a.createElement("div",{className:"FullPage"},"Loading. Please wait..."):this.state.fetchSuccess?r.a.createElement("div",null,r.a.createElement("div",{className:"IndexPageInfoContainer"},r.a.createElement("div",{className:"IndexPageInfo"},r.a.createElement("div",{className:"IndexPageAvatarBox"},r.a.createElement("img",{alt:"avatar",src:"https://avatars1.githubusercontent.com/u/22990333?s=460&u=ab4f382b52aae8a47f29de660ed2b4551e8b1d72&v=4"})),r.a.createElement("div",{className:"IndexPageInfoBox"},r.a.createElement("h2",{className:"IndexPageNameBox"},this.state.name),r.a.createElement("div",{className:"IndexPageCompanyBox"},r.a.createElement(k.a,{icon:j.a,style:{width:16,marginRight:5}}),this.state.company),r.a.createElement("div",{className:"IndexPageBlogBox"},r.a.createElement(k.a,{icon:y.d,style:{width:16,marginRight:5}}),this.state.blog),r.a.createElement("div",{className:"IndexPageLocationBox"},r.a.createElement(k.a,{icon:y.e,style:{width:16,marginRight:5}}),this.state.location),r.a.createElement("div",{className:"IndexPageLinkBox"},r.a.createElement(k.a,{icon:y.d,style:{width:16,marginRight:5}}),r.a.createElement("a",{href:this.state.github},this.state.github))))),r.a.createElement("div",{className:"IndexPageContainer"},r.a.createElement("h3",{className:"ParaTitle"},"\u6211\u7684\u7edf\u8ba1\u4fe1\u606f"),r.a.createElement("div",{className:"IndexPageProfBox"},r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:"100%"},src:"https://github-readme-stats.vercel.app/api?username=Woodykaixa&show_icons=true",alt:"My stats"})),r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:"100%"},src:"https://github-readme-stats.vercel.app/api/top-langs/?username=Woodykaixa&layout=compact&hide=html&card_width=439.94",alt:"My favorite languages"}))),r.a.createElement("div",{className:"SplitLine"}),r.a.createElement("h3",{className:"ParaTitle"},"\u6211\u7684\u4ee3\u7801"),r.a.createElement("ul",{className:"IndexPageRepoList"},this.state.repos.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement(O,{title:t.title,link:t.link,description:t.description,fork:t.fork,star:t.star,language:t.language,isLargeScreen:e.props.isLargeScreen,screenWidth:e.props.screenWidth,isForked:t.isForked}))}))),r.a.createElement("h3",{className:"ParaTitle"},"\u5173\u4e8e\u672c\u7ad9"),r.a.createElement("div",{className:"AboutSiteBlock"},r.a.createElement("p",null,"\u6b22\u8fce\u6765\u5230\u5361\u590f\u5999\u5999\u5c4b\u3002"),r.a.createElement("p",null,"\u8fd9\u91cc\u662f\u6211\u7684\u4e2a\u4eba\u7f51\u7ad9\uff0c\u4e5f\u662f\u6211\u7684\u7f51\u9875\u5236\u4f5c\u5927\u4f5c\u4e1a\u3002",r.a.createElement("b",null,"\u5173\u4e8e"),"\u9875\u9762\u5c55\u793a\u4e86\u6211\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4e5f\u58f0\u660e\u4e86\u672c\u7f51\u7ad9\u7684\u4fe1\u606f\uff1b",r.a.createElement("b",null,"\u6587\u6863"),"\u9875\u9762\u53ef\u4ee5\u7528\u4e8e\u5c55\u793a\u6211\u81ea\u5df1\u53c2\u4e0e\u7684\u9879\u76ee\u6587\u6863\uff0c\u6ce8\u518c\u7528\u6237\u6839\u636e\u81ea\u5df1\u7684\u6743\u9650\u8bbf\u95ee\u76f8\u5e94\u7684\u6587\u6863\uff0c\u540c\u65f6\u8fd8\u6709\u4e00\u4e2a\u516c\u5f00\u6587\u6863\u4f5c\u4e3a\u535a\u5ba2\u4f7f\u7528\uff1b",r.a.createElement("b",null,"\u5de5\u5177"),"\u9875\u9762\u662f\u4e00\u4e9b\u5c0f\u5de5\u5177\uff0c\u4f9b\u90e8\u5206\u4eba\u4f7f\u7528\u3002"),r.a.createElement("p",null,"\u672c\u9875\u9762\u7684\u5236\u4f5c\u4f7f\u7528\u4e86\u5982\u4e0b\u7ec4\u4ef6\uff1aReact\u3001React-Router\u3001React-Modal\u3001React-Cookies\u3001FontAwesome\u3002 \u540c\u65f6\uff0c\u7f51\u9875\u98ce\u683c\u53c2\u8003\u4e86Material Design\uff0c\u5e76\u4f7f\u7528",r.a.createElement("a",{href:"https://github.com/anuraghazra/github-readme-stats"},"github-readme-stats"),"\u751f\u6210\u7edf\u8ba1\u4fe1\u606f\u3002")))):r.a.createElement("div",{className:"ErrorMessage FullPage"},"Failed in fetching my_profile. Please try refresh or",r.a.createElement("a",{href:"mailto:690750353@qq.com"}," contact with me"))}}]),a}(r.a.Component),L=a(20),C=a.n(L),S=a(38),F=a(28);a(263),a(264);C.a.setOptions({renderer:new C.a.Renderer,highlight:function(e){return Object(S.highlightAuto)(e).value},gfm:!0,pedantic:!1,breaks:!1,smartLists:!0,smartypants:!1});var x=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("a",{className:"FileItem",href:v("/doc/project_file/")+this.props.project+this.props.basePath+"/"+this.props.filename,onClick:this.props.onFileItemClick,key:this.props.basePath+"/"+this.props.filename},r.a.createElement("div",null,r.a.createElement(k.a,{icon:j.b,style:{marginRight:10,color:"#adc1e4"}}),this.props.filename))}}]),a}(r.a.Component),I=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).swapExpandingState=function(){n.state.expanded?n.setState({expanded:!1}):n.setState({expanded:!0})},n.state={expanded:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.basePath+"/"+this.props.folderName;return r.a.createElement("li",{className:"FolderItem"},r.a.createElement("div",{onClick:this.swapExpandingState},r.a.createElement("div",null,r.a.createElement(k.a,{icon:this.state.expanded?y.c:y.b,color:"#f9d870",style:{marginRight:10,width:16}}),r.a.createElement("span",null,this.props.folderName))),this.state.expanded?r.a.createElement("div",{className:"CatalogueIndent"},r.a.createElement("ul",null,this.props.contents.map((function(n){return"string"===typeof n?r.a.createElement(x,{project:e.props.project,onFileItemClick:e.props.onFileItemClick,filename:n,basePath:t}):r.a.createElement(a,{project:e.props.project,folderName:n.folderName,basePath:t,contents:n.contents,onFileItemClick:e.props.onFileItemClick})})))):null)}}]),a}(r.a.Component),P=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onFileItemClick=function(e){e.preventDefault(),n.props.isLargeScreen||n.hideMobileMask();var t=e.nativeEvent.target.parentElement.href,a=t.endsWith(".md")?"markdown":"text",r=t.substr(t.lastIndexOf("/")+1);fetch(t,{method:"POST",credentials:"include",mode:"cors"}).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){if(e.err)n.props.openProjectFile("error:\n"+e.data,"text",r);else{var t="markdown"===a?Object(F.sanitize)(C()(e.data)):e.data;n.props.openProjectFile(t,a,r)}})).catch((function(){n.props.openProjectFile("failed to fetch:"+t,"text",r)}))},n.showMobileMask=function(){n.setState({showMask:!0})},n.hideMobileMask=function(){n.setState({showMask:!1})},n.mobileRenderFileOrFolder=function(e,t){return"string"===typeof t?r.a.createElement("a",{href:v("/doc/project_file/")+n.props.project+e+"/"+t,key:e+"/"+t,onClick:n.onFileItemClick},r.a.createElement("li",{className:"FileItem"},e+"/"+t)):r.a.createElement("li",{key:e+"/"+t.folderName,className:"FolderItem"},r.a.createElement("ul",null,t.contents.map((function(a){return n.mobileRenderFileOrFolder(e+"/"+t.folderName,a)}))))},n.state={showMask:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.props.projectFiles),this.props.isLargeScreen?r.a.createElement("nav",{className:"DocumentCatalogueContainer"},r.a.createElement("header",{className:"DocumentCatalogueHeader"},r.a.createElement("div",{style:{width:"fit-content"}},r.a.createElement(d.b,{to:"../",className:"CloseProjectLink"},r.a.createElement(k.a,{icon:y.a}))),r.a.createElement("div",null,this.props.project)),r.a.createElement("div",{className:"DocumentCatalogueBody"},r.a.createElement("ul",{className:"DocumentCatalogueTopFolder"},this.props.projectFiles.map((function(t){return"string"===typeof t?r.a.createElement(x,{filename:t,project:e.props.project,basePath:"",onFileItemClick:e.onFileItemClick}):r.a.createElement(I,{folderName:t.folderName,project:e.props.project,basePath:"",contents:t.contents,onFileItemClick:e.onFileItemClick})}))))):r.a.createElement("div",{className:"MobileCatalogueContainer"},r.a.createElement("div",{style:{wordBreak:"keep-all"}},"\u5f53\u524d\u6587\u4ef6\uff1a"),r.a.createElement("div",{className:"MobileCatalogueChangeButton",onClick:this.showMobileMask},this.props.currentFile),this.state.showMask?r.a.createElement("div",{className:"MobileMask",onClick:this.hideMobileMask},r.a.createElement("ul",{className:"MobileFileList"},this.props.projectFiles.map((function(t){return e.mobileRenderFileOrFolder("",t)})))):null)}}]),a}(r.a.Component),M=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e="markdown"===this.props.fileType?r.a.createElement("div",{className:"FileContent",dangerouslySetInnerHTML:{__html:Object(F.sanitize)(this.props.fileContent)}}):r.a.createElement("div",{className:"FileContent"},this.props.fileContent.split("\n").map((function(e,t){return r.a.createElement("div",{key:t,style:{fontSize:"large"}},e)})));return r.a.createElement("div",{className:"FileContainer"},r.a.createElement("ul",{className:"FileHeader"},r.a.createElement("li",{className:"FileTab"},this.props.filename)),r.a.createElement("div",{className:"FileBody"},e))}}]),a}(r.a.Component),W=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).openProjectFile=function(e,t,a){n.setState({fileContent:e,fileType:t,filename:a})},w("/doc/"+n.props.project,"GET").then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){if(e.err)throw new Error(e.data);n.props.updateProjectFiles(e.data)})),n.state={fileContent:"\u6b22\u8fce\u4f7f\u7528kaixadoc",fileType:"markdown",filename:"welcome"},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ProjectReaderContainer"},r.a.createElement(P,{project:this.props.project,projectFiles:this.props.files,currentFile:this.state.filename,openProjectFile:this.openProjectFile,screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen}),r.a.createElement(M,{fileContent:this.state.fileContent,fileType:this.state.fileType,filename:this.state.filename}))}}]),a}(r.a.Component),B=a(6),T=(a(265),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("li",{className:"DocLink"},r.a.createElement(d.b,{to:"/"+this.props.linkName},this.props.displayName))}}]),a}(r.a.Component)),R=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"ProjectList"},this.props.projects.map((function(e,t){return r.a.createElement(T,{displayName:e.name,linkName:e.url,key:t})}))))}}]),a}(r.a.Component),D=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).updateProjectFiles=function(e){n.setState({projectFiles:e})},n.state={projects:[],projectFiles:[],ProjectsQueried:!1},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;w("/doc/","GET").then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(t){if(t.err)throw new Error("Failed to fetch projects");e.setState({projects:t.data,ProjectsQueried:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return this.state.ProjectsQueried?r.a.createElement("div",{className:"FullPage"},r.a.createElement(d.a,{basename:"/docs"},r.a.createElement(B.d,null,this.state.projects.map((function(t,a){return r.a.createElement(B.b,{key:a,path:"/"+t.url},r.a.createElement("div",{className:"DocPageContainer"},r.a.createElement(W,{project:t.name,files:e.state.projectFiles,updateProjectFiles:e.updateProjectFiles,screenWidth:e.props.screenWidth,isLargeScreen:e.props.isLargeScreen})))})),r.a.createElement(B.b,{path:"/"},r.a.createElement(R,{projects:this.state.projects}))))):r.a.createElement("div",null,"loading projects. please wait.")}}]),a}(r.a.Component),A=(a(266),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).OnChange=function(t){var a=t.target;e.props.setValue(a.value)},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ResponsiveInputBorder"},this.props.isLargeScreen?r.a.createElement("label",{className:"ResponsiveInputHint"},this.props.placeholder):null,r.a.createElement("input",{type:this.props.type?this.props.type:"text",name:this.props.name,value:this.props.value,placeholder:this.props.isLargeScreen?"":this.props.placeholder,autoComplete:"password"===this.props.type?"current-password":"on",onChange:this.OnChange}))}}]),a}(r.a.Component)),U=a(29),V=a.n(U),_={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:0,borderRadius:5}},q=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onSubmit=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.props.loginFunction();case 3:if(!e.sent){e.next=7;break}n.props.closeLoginModal(),e.next=8;break;case 7:alert("error");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={username:"",password:""},n}return Object(p.a)(a,[{key:"componentWillUnmount",value:function(){V.a.setAppElement(".App")}},{key:"render",value:function(){return r.a.createElement(V.a,{isOpen:this.props.loginModalOpen,style:_,shouldCloseOnOverlayClick:!0},r.a.createElement("form",{className:"LoginForm",onSubmit:this.onSubmit,action:"https://www.kaixa.cn/login"},r.a.createElement("button",{className:"LoginFormCloseButton",onClick:this.props.closeLoginModal},r.a.createElement(k.a,{icon:j.c,style:{width:40}})),r.a.createElement("h3",null,"\u767b\u5f55"),r.a.createElement(A,{name:"name",placeholder:"\u7528\u6237\u540d",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.props.username,setValue:this.props.nameChanged}),r.a.createElement(A,{type:"password",name:"pwd",placeholder:"\u5bc6 \u7801",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.props.password,setValue:this.props.pwdChanged}),r.a.createElement("div",{className:"LoginFormButtonArea"},r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"SecondButton"},"\u6ce8\u518c")),r.a.createElement("div",null,r.a.createElement("button",{className:"MainButton",type:"submit"},"\u767b\u5f55")))))}}]),a}(r.a.Component),H=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return this.props.loggedIn&&this.props.logoutFunction(),r.a.createElement(B.a,{to:"/login"})}}]),a}(r.a.Component),z=(a(276),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).query=function(e){e.preventDefault(),fetch(v("BjutSchedule"),{method:"POST",body:JSON.stringify({schoolId:n.state.sid,vpn:n.state.pwVPN,af:n.state.pwAF}),mode:"cors",credentials:"include"}).then((function(e){return e.text()})).then((function(e){console.log(e)}))},n.setSchoolId=function(e){n.setState({sid:e})},n.setAF=function(e){n.setState({pwAF:e})},n.setVPN=function(e){n.setState({pwVPN:e})},n.state={sid:"",pwAF:"",pwVPN:"",table:""},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{paddingTop:"1rem"}},r.a.createElement("form",{onSubmit:this.query},r.a.createElement("h3",null,"\u8bfe\u8868\u67e5\u8be2"),r.a.createElement(A,{placeholder:"\u5b66\u53f7",name:"schoolId",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.state.sid,setValue:this.setSchoolId}),r.a.createElement(A,{placeholder:"\u6559\u52a1\u5bc6\u7801",name:"pwForAF",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.state.pwAF,setValue:this.setAF,type:"password"}),r.a.createElement(A,{placeholder:"\u7f51\u5173\u5bc6\u7801",name:"pwForVPN",screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen,value:this.state.pwVPN,setValue:this.setVPN,type:"password"}),r.a.createElement("button",null,"\u67e5\u8be2")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.table}}))}}]),a}(r.a.Component)),G=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"FullPage"},r.a.createElement(z,{screenWidth:this.props.screenWidth,isLargeScreen:this.props.isLargeScreen}))}}]),a}(r.a.Component),J=(a(277),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Footer"},r.a.createElement("div",{className:"FooterInfo"},r.a.createElement("ul",null,this.props.sites.map((function(e,t){return r.a.createElement("li",{key:t},e.name)})))))}}]),a}(r.a.Component)),Q=a(16),$=a.n(Q),K=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).setResponsiveStates=function(){var e=document.body.clientWidth;n.setState({width:e,height:document.body.clientHeight,isLargeScreen:b(e)})},n.userRegister=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("username",n.state.username),t.append("password",n.state.password),e.next=5,w("/auth/register","POST",t).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){if(e.err)throw new Error(e.data);alert(e.data)})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)}))),n.userLogin=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("username",n.state.username),t.append("password",n.state.password),e.next=5,w("/auth/login","POST",t).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){if(e.err)throw new Error("".concat(e.err,": ").concat(e.data));if("welcome"!==e.data)throw new Error("Unknown error: "+e.data);n.setState({isLoggedInUser:!0});var t=new Date;t.setDate(t.getDate()+1),$.a.save("uname",n.state.username,{path:"/",expires:t})})).catch((function(e){console.log(e)}));case 5:return console.log($.a.loadAll(!1)),e.abrupt("return",n.state.isLoggedInUser);case 7:case"end":return e.stop()}}),e)}))),n.userLogout=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/logout","GET").then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(){n.setState({isLoggedInUser:!1}),$.a.remove("uname")})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",n.state.isLoggedInUser);case 3:case"end":return e.stop()}}),e)}))),n.openLoginModal=function(){n.setState({showLoginModal:!0})},n.closeLoginModal=function(){n.setState({showLoginModal:!1})},n.passwordChanged=function(e){n.setState({password:e})},n.nameChanged=function(e){n.setState({username:e})};var r=document.body.clientWidth;n.state={navSites:[{name:"\u5173\u4e8e",link:"/"},{name:"\u6587\u6863",link:"/docs"},{name:"\u5de5\u5177",link:"/tools"}],isLoggedInUser:!1,footerSites:[{name:"Copyright \xa92020 Woodykaixa. All rights reserved."}],width:r,height:document.body.clientHeight,isLargeScreen:b(r),showLoginModal:!1,username:"",password:""},window.onresize=n.setResponsiveStates;var s=$.a.load("uname"),o=new Date;return o.setDate(o.getDate()+1),w("/auth/whoami","GET").then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){var t=e.data.username;null!==t&&s===t?($.a.save("uname",t,{path:"/",expires:o}),n.setState({isLoggedInUser:!0,username:t})):$.a.remove("uname")})).catch((function(e){console.log("failed to fetch whoami: "+e),$.a.remove("uname")})),n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,{loginFunction:this.userLogin,screenWidth:this.state.width,username:this.state.username,password:this.state.password,isLargeScreen:this.state.isLargeScreen,loginModalOpen:this.state.showLoginModal,openLoginModal:this.openLoginModal,closeLoginModal:this.closeLoginModal,nameChanged:this.nameChanged,pwdChanged:this.passwordChanged}),r.a.createElement(d.a,null,r.a.createElement(E,{items:this.state.navSites,loggedIn:this.state.isLoggedInUser,title:"\u5361\u590f\u5999\u5999\u5c4b",screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen,openLoginModal:this.openLoginModal,requestLogout:this.userLogout}),r.a.createElement("div",{className:"MainContent"},r.a.createElement(B.d,null,r.a.createElement(B.b,{path:"/logout"},r.a.createElement(H,{loggedIn:this.state.isLoggedInUser,logoutFunction:this.userLogout})),r.a.createElement(B.b,{path:"/docs"},r.a.createElement(D,{loggedIn:this.state.isLoggedInUser,screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})),r.a.createElement(B.b,{path:"/tools"},r.a.createElement(G,{screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})),r.a.createElement(B.b,{path:"/"},r.a.createElement(N,{screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})))),r.a.createElement(J,{sites:this.state.footerSites,screenWidth:this.state.width,isLargeScreen:this.state.isLargeScreen})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},39:function(e,t,a){e.exports=a(279)},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},52:function(e,t,a){}},[[39,1,2]]]);
//# sourceMappingURL=main.836c5d38.chunk.js.map